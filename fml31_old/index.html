<!DOCTYPE html>
<html lang="ru">
    <head>
		<title>SOMEL Уголок ФМЛ31</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="stylesheet" href="helper.css">
		<link rel="stylesheet" href="interact.css">
		<link rel="stylesheet" href="backgroungs.css">
		<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Cascadia+Mono&display=swap">
    </head>

  <body bgcolor="#031220" style="color: white;">
	<div class="header">
		<div class="header_menu">
			<div class="header_element"><a href="info/index.html">Информация</a></div>
			<div class="header_element"><a href="back/index.html">Обратная связь</a></div>
			<div class="header_element"><a href="coop/index.html">Сотрудничество</a></div>
		</div>

		<div class="header_profile" id="header-profile">
			<div id="avatar-container">
				<div id="avatar-initial"></div>
				<img id="avatar-image" src="" alt="Avatar" style="display:none;">
			</div>
			<div id="profile-name">Загрузка аккаунта</div>
			<div style="display:block;">
				<p><a class="profile-link" id="profile-link" href="https://tbs-server-s7vy.onrender.com/dashboard/">Войти</a></p>
				<p><a class="profile-link" id="profile-link2" style="display: none;" href="https://tbs-server-s7vy.onrender.com/dashboard/"></a></p>
			</div>
		</div>
	</div>




	<h4 style="width: 100%; text-align: center; font-family: century gothic; margin: 10px;">Оставь свой след.</h4>
	<div class="divider_box">
		Уголок новостей
	</div>

	<div class="content_box">
		<div id="news"></div>
		<div style="text-align: center; width: 100%;">Просмотреть все <div style="font-size: medium;" class="header_element"><a href="../news/news.html">Новости</a></div></div>
	</div>


	<div class="divider_box">
		Уголок помощи
	</div>

	<div class="content_box" >
		<div class="cardholder">
			<div class="card_full">
				<a href = "../helpers/mathpython/choose/index.html">
					<div class="card_container">
						<img class="lighter" src="img/lighter.png">
						<img src="img/python9.jpg" style="height: 100%; margin-left: -79%;" class="icon">
					</div>
					<p class="card_name">PYTHON & МАТ. ЛОГИКА</p>
				</a>
			</div>
			<div class="card_full">
				<a href = "http://mxmst.beget.tech/bilet/">
					<div class="card_container">
						<img class="lighter" src="img/lighter.png">
						<img src="img/geom.jpg" style="height: 100%; margin-left: -79%;" class="icon">
					</div>
					<p class="card_name">БИЛЕТЫ ПО ГЕОМЕТРИИ</p>
				</a>
			</div>
			<div class="card_full">
				<a href = "https://mxmst.ru/lectorium">
					<div class="card_container">
						<img class="lighter" src="img/lighter.png">
						<img src="img/mxmst.jpg" style="height: 100%;" class="icon">
					</div>
					<p class="card_name">ГЕОМЕТРИЯ ДЛЯ 10 КЛАССА</p>
				</a>
			</div>
			<div class="card_full">
				<a href = "../helpers/math/index.html">
					<div class="card_container">
						<img class="lighter" src="img/lighter.png">
						<img src="img/math.jpg" style="height: 100%; margin-left: -55%;" class="icon">
					</div>
					<p class="card_name">МАТЕМАТИКА</p>
				</a>
			</div>
			<div class="card_full">
				<a href = "../helpers/physics/index.html">
					<div class="card_container">
						<img class="lighter" src="img/lighter.png">
						<img src="img/physics.jpg" style="height: 100%; margin-left: -68%;" class="icon">
					</div>
					<p class="card_name">ФИЗИКА</p>
				</a>
			</div>
			<div class="card_full">
				<a href = "../helpers/chemistry/index.html">
					<div class="card_container">
						<img class="lighter" src="img/lighter.png">
						<img src="img/chem.jpg" style="height: 100%; margin-left: -79%;" class="icon">
					</div>
					<p class="card_name">ХИМИЯ</p>
				</a>
			</div>
			<div class="card_full">
				<a href = "../helpers/biology/index.html">
					<div class="card_container">
						<img class="lighter" src="img/lighter.png">
						<img src="img/biology.jpg" style="height: 100%; margin-left: -100%;" class="icon">
					</div>
					<p class="card_name">БИОЛОГИЯ</p>
				</a>
			</div>
		</div>
		<div style="text-align: center; width: 100%;">Нашли ошибку? <div style="font-size: medium;" class="header_element"><a href="back/index.html">Сообщите нам!</a></div></div>
	</div>




	<div class="divider_box">
		Уголок информации
	</div>

	<div class="content_box">
		<h2 style="margin-bottom: 5px;">Ссылки</h2>
		<div class="cardholder">
				<div class="card_full">
					<a href = "http://stud.fml31.ru/" target="_blank">
						<div class="card_container">
							<img class="lighter" src="img/lighter.png">
							<img src="img/studfml.jpg" style="height: 100%; margin-left: 0%;" class="icon">
						</div>
						<p class="card_name">ПАПКИ УЧАЩИХСЯ</p>
					</a>
				</div>
				<div class="card_full">
					<a href = "http://ejudge.fml31.ru/" target="_blank">
						<div class="card_container">
							<img class="lighter" src="img/lighter.png">
							<img src="img/ejudje.jpg" style="height: 100%; margin-left: -82%;" class="icon">
						</div>
						<p class="card_name">EJUDJE FML31</p>
					</a>
				</div>
				<div class="card_full">
					<a href = "https://informatics.msk.ru/" target="_blank">
						<div class="card_container">
							<img class="lighter" src="img/lighter.png">
							<img src="img/informatics.jpg" style="height: 100%; margin-left: 0%;" class="icon">
						</div>
						<p class="card_name">INFORMATICS MSK</p>
					</a>
				</div>
		</div>
	</div>
	
	


	<div class="divider_box">
		Уголок Лиги свободного интернета
	</div>

	<div class="content_box league">
		<div class="cardholder">
			<div class="card_full">
				<a href = "https://t.me/bypassblock/399" target="_blank">
					<div class="card_container">
						<img class="lighter" src="img/lighter.png">
						<img src="img/zapret.jpg" style="height: 100%; margin-left: 0%;" class="icon">
					</div>
					<p class="card_name">ZAPRET GUI</p>
				</a>
			</div>
			<div class="card_full">
				<a href = "files/psiphon3.exe" target="_blank">
					<div class="card_container">
						<img class="lighter" src="img/lighter.png">
						<img src="img/psiphon.jpg" style="height: 100%; margin-left: 0%;" class="icon">
					</div>
					<p class="card_name">PSIPHON</p>
				</a>
			</div>
		</div>
		<button id="zapret" class="hidebutton">Инструкция к ZAPRETGUI (тык)</button>
		<div id="dzapret" style="display: none;">
			<p>Zapret GUI - сборник обхода DPI блокировок (В основном, YouTube и Discord). Вот гайд по установке на ПК:</p>
			<ol>
				<li>Скачиваем ZapretSetup.exe по данной <a href = "https://t.me/bypassblock/399" target="_blank">ссылке.</a></li>
				<li>Запускаем (Windows может жаловаться на него, но продолжаем, выдаем права администратора)</li>
				<li>Выбираем папку для установки.</li>
				<li>Нажимаем Далее; Оставляем галочку, чтобы создать ярлык на рабочем столе.</li>
				<li>Нажимаем Далее; Нажимаем Установить.</li>
			</ol>
			<p>Настраиваем:</p>
			<ul>
				<li>Запускаем устаановленную программу, даём доступ администратора.</li>
				<li>Выбираем стратегию (Сменить пресет обхода блокировок > В списке - Все сайты > Выбрать.</li>
				<li>Нажимаем Вкл. Автозапуск > Автозапуск программы ZAPRETGUI > OK.</li>
			</ul>
			<p>Иногда при запуске программа будет обновляться, надо подождать и не закрывать установщик.</p>
			<p>Тестируем работу!</p>
		</div>
	</div>
	



	
	<div class="divider_box">
		Somel team
	</div>

	<div class="content_box">
		<h2 style="margin-bottom: 5px;">Основатель (в трёх аккаунтах)</h2>
		<div class="cardholder">
			<div class="card_full avatar">
				<a href="http://k90908k8.beget.tech/profile/profile.html?pub_id=3"> 
					<div class="card_container news_container">
						<img src="img/lighter.png" class="lighter">
						<img src="img/somel.jpg" style="height: 100%;" class="icon">
					</div>
					<p class="card_name">Somel</p>
					<ul>
						<li>Фронтенд</li>
						<li>Бекенд</li>
						<li>(Fullstack)</li>
						<li>ИБ</li>
						<li>БД</li>
						<li>DevOps</li>
					</ul>
				</a>
			</div>
			<div class="card_full avatar">
				<a href="http://k90908k8.beget.tech/profile/profile.html?pub_id=1"> 
					<div class="card_container news_container">
						<img src="img/lighter.png" class="lighter">
						<img src="img/somel_old.jpg" style="height: 100%;" class="icon">
					</div>
					<p class="card_name">OR 1=1</p>
					<ul>
						<li>ИБ</li>
						<li>БД инженер</li>
					</ul>
				</a>
			</div>
			<div class="card_full avatar">
				<a href="http://k90908k8.beget.tech/profile/profile.html?pub_id=4"> 
					<div class="card_container news_container">
						<img src="img/lighter.png" class="lighter">
						<img src="img/yarik.jpg" style="height: 100%;" class="icon">
					</div>
					<p class="card_name">Ярик</p>
					<ul>
						<li>Promoter</li>
						<li>Human Resources</li>
					</ul>
				</a>
			</div>
        </div>
		<h2 style="margin-bottom: 5px;">Отдел разработки</h2>
		<div class="cardholder">
			<div class="card_full avatar">
				<a href="https://chatgpt.com"> 
					<div class="card_container news_container">
						<img src="img/lighter.png" class="lighter">
						<img src="img/gpt.jpg" style="height: 100%;" class="icon">
					</div>
					<p class="card_name">ChatGPT</p>
					<ul>
						<li>Умный</li>
						<li>*Но ленивый</li>
					</ul>
				</a>
			</div>
			<div class="card_full avatar">
				<a href="https://gemini.google.com/"> 
					<div class="card_container news_container">
						<img src="img/lighter.png" class="lighter">
						<img src="img/gemini.jpg" style="height: 100%;" class="icon">
					</div>
					<p class="card_name">Gemini</p>
					<ul>
						<li>Терпеливый</li>
						<li>Рутина</li>
					</ul>
				</a>
			</div>
		</div>
		<h2 style="margin-bottom: 5px;">Спецотдел</h2>
			<div class="card_full avatar">
				<a href="http://k90908k8.beget.tech/profile/profile.html?pub_id=2"> 
					<div class="card_container news_container">
						<img src="img/lighter.png" class="lighter">
						<img src="img/lina.jpg" style="height: 100%;" class="icon">
					</div>
					<p class="card_name">Лина</p>
					<ul>
						<li>Создатель методички Биология</li>
						<li>Моральная поддержка</li>
					</ul>
				</a>
			</div>
	</div>
	
    <script src="visual.js"></script>
	<script src="../api/jwt.js"></script>
	<script>
		if (jwtInfo.authenticated) {
			console.log("pub_id:", jwtInfo.pub_id);

			async function loadHeaderProfile(pubId) {
				try {
					const response = await fetch(`http://k90908k8.beget.tech/profile/profile.php?action=get_profile&pub_id=${pubId}`, { cache: 'no-store' });
					const data = await response.json();

					if (data.success) {
						const profileName = document.getElementById('profile-name');
						profileName.textContent = data.data.name || 'Без имени';

						const profileLink = document.getElementById('profile-link');
						profileLink.href = `http://k90908k8.beget.tech/profile/profile.html?pub_id=${pubId}`;
						profileLink.textContent = 'Профиль';
						const profileLink2 = document.getElementById('profile-link2');
						profileLink2.href = `https://tbs-server-s7vy.onrender.com/dashboard/`;
						profileLink2.textContent = 'Панель инструментов';
						profileLink2.style.display = "inline-block";

						loadAvatar(pubId, data.avatar_url, data.cache_info);
					} else {
						setNoAccount();
					}
				} catch (e) {
					console.error('Ошибка загрузки профиля', e);
					setNoAccount();
				}
			}

			function setNoAccount() {
				document.getElementById('profile-name').textContent = 'Нет аккаунта!';
				const profileLink = document.getElementById('profile-link');
				profileLink.href = 'https://tbs-server-s7vy.onrender.com/dashboard/';
				profileLink.textContent = 'Войти';
			}

			loadHeaderProfile(jwtInfo.pub_id);
		} else {
			setNoAccount();
		}
		async function loadAvatar(pubId, avatarUrl = null, cacheInfo = null) {
			const avatarImage = document.getElementById('avatar-image');
			const avatarInitial = document.getElementById('avatar-initial');
			const userName = document.getElementById('profile-name').textContent;
			avatarInitial.textContent = userName ? userName.charAt(0).toUpperCase() : '?';

			if (avatarUrl) {
				avatarImage.onload = function() {
					avatarInitial.style.display = 'none';
					avatarImage.style.display = 'block';
				};
				avatarImage.onerror = function() {
					avatarInitial.style.display = 'flex';
					avatarImage.style.display = 'none';
				};
				avatarImage.src = avatarUrl + (avatarUrl.includes('?') ? '&' : '?') + 't=' + new Date().getTime();
			} else {
				avatarImage.onload = function() {
					avatarInitial.style.display = 'none';
					avatarImage.style.display = 'block';
				};
				avatarImage.onerror = function() {
					avatarInitial.style.display = 'flex';
					avatarImage.style.display = 'none';
				};
				avatarImage.src = `https://tbs-server-s7vy.onrender.com/avatar/?pub_id=${pubId}&format=image&t=${new Date().getTime()}`;
			}
		}


		(function () {
		const params = new URLSearchParams(window.location.search);
			if (params.get('logout') === '1') {
				localStorage.removeItem('jwt');
				console.log('JWT cleared by logout');
			}
		})();

		
		(function () {
			const WAKE_URL = 'https://tbs-server-s7vy.onrender.com/wake/';
			const INTERVAL_MS = 13 * 60 * 1000;
			function wake() {
				fetch(WAKE_URL, {
					method: 'GET',
					cache: 'no-store',
					credentials: 'omit',
				}).catch(() => {
				});
			}
			wake();
			setInterval(wake, INTERVAL_MS);
		})();
	</script>

	<script>
		const count = 30;
const particles = [];

for (let i = 0; i < count; i++) {
  createParticle();
}

function createParticle() {
  const el = document.createElement("div");
  el.className = "particle";
  document.body.appendChild(el);

  let x = Math.random() * window.innerWidth;
  let y = Math.random() * window.innerHeight + window.scrollY; // учитываем скролл
  let vx = (Math.random() - 0.5) * 4;
  let vy = (Math.random() - 0.5) * 4;

  const particle = { el, x, y, vx, vy };
  particles.push(particle);

  function move() {
    x += vx;
    y += vy;

    // Границы видимой области
    const minX = 0;
    const maxX = window.innerWidth - 20;
    const minY = window.scrollY;
    const maxY = window.scrollY + window.innerHeight - 20;

    // Отскок от стенок видимой области
    if (x < minX) { x = minX; vx *= -1; }
    if (x > maxX) { x = maxX; vx *= -1; }
    if (y < minY) { y = minY; vy *= -1; }
    if (y > maxY) { y = maxY; vy *= -1; }

    el.style.left = x + "px";
    el.style.top = y + "px";

    particle.x = x;
    particle.y = y;

    requestAnimationFrame(move);
  }

  move();
}

// Обновляем границы при ресайзе и скролле
window.addEventListener("resize", () => {
  // ничего делать не нужно, move сам проверяет размеры
});

window.addEventListener("scroll", () => {
  // частицы сами будут корректироваться при движении
});
</script>
  </body>
</html>